<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/loginstyle.css"/>
		<link rel="stylesheet" type="text/css" href="../css/footerstyle.css"/>
		<script src="../lib/requirejs/require.js" data-main="../js/login"></script>
	</head>
	<body>
		<!--顶部-->
		<div class="top">
			<div class="wrap">
				<div class="logo">
					<a href="#" target="_blank"></a>
					<span>登录</span>
				</div>
			</div>
		</div>
		
		<!--板块-->
		<div class="login">
			<div class="wrap clearfix">
				<!--广告图-->
				<div class="banner">
					<a href="#" target="_blank">
						<img width="666" height="418" src="../images/login-banner.png"/>
					</a>
				</div>
				<!--表单-->
				<div class="fr">
					<div class="login-main">
						<p>
							<strong>欢迎登录</strong>
							<span>
								还没有账号？
								<a class="green" href="http://127.0.0.1:8080/html/register.html">立即注册</a>
							</span>
						</p>
						<div id="msg-wrap" class="msg-wrap">
							<div id="msg-error">
								<span id="msg-error-choose"></span>
							</div>
						</div>
						<p>
							<span class="input-phone-icon">&nbsp;</span>
							<input class="input input-phone" id="UserName" name="UserName" placeholder="邮箱/账号/已验证手机" type="text"/>
						</p>
						<p>
							<span class="input-key-icon">&nbsp;</span>
							<input class="input input-key" id="Pwd" name="Pwd" placeholder="密码" type="password"/>
						</p>
						<p>
							<input class="input input-key" placeholder="验证码" style="width: 100px;" type="text" id="key"/>
							<span id="ukey"></span>
						</p>
						<label>
							<input class="remeber" type="checkbox"/>记住用户名
						</label>
						<span>
							<a href="#" class="forget">忘记登录密码？</a>
						</span>

						<p class="btn">
							<button id="btnLogin" class="btn-green-1">登 &nbsp;录</button>
						</p>
						<p>第三方登录</p>
						<div class="p-code-btn">
							<a href="#" class="qq">
								<i></i>
							</a>
							<a href="#" class="sina">
								<i></i>
							</a>
							<a href="#" class="ay">
								<i></i>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!--尾部-->
		<div class="footer"></div>
		
		<!--正则表达式验证-->
		<script type="text/javascript" src="../js/tools.js"></script>
		<script type="text/javascript">
			function ckUser(){
				var reg = new RegExp("^\\w{6,}$");
				return reg.test($("#UserName").val());
			}
			function ckPwd(){
				var reg = /^.{6,}/;
				return reg.test($("#Pwd").val());
			}
			window.onload=function(){
				var count = 0,
					str = "";
				while (count < 4){
					var rand = Math.floor(Math.random() * 75) + 48;
					if (rand >= 48 && rand <= 57
						|| rand >= 65 && rand <= 90
						|| rand >= 97 && rand <= 122) {
						count++;
						str += String.fromCharCode(rand);
					}
				}
				$("#ukey").innerHTML=str;
			}
			
			$("#btnLogin").onclick=function(e){
				if($("#key").val() !== $("#ukey").text()){
					e.preventDefault();
					$("#msg-error").css("display","block");
					$("#msg-error-choose").text("验证码输入有误，请重新输入！");
				}
				else if(!ckPwd() || !ckUser()){
					e.preventDefault();
					$("#msg-error").css("display","block");
					$("#msg-error-choose").text("用户名或密码错误，请重新输入！");
				}
				else{
					location="http://127.0.0.1:8080/index.html";
				}
			};
		</script>	
	</body>
</html>
